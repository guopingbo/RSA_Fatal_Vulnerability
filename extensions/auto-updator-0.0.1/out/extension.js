!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=38)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";const n=r(1),i=r(4),o=r(45),s=r(21);function a(e){if("function"==typeof e._write||"function"==typeof e._transform)return"stream";if("string"!=typeof e){const e=new Error("Type is not supported, must be a file path, or a writable stream");throw e.name="IlligalDestinationError",e}return"path"}t.sourceType=(e=>{if(e){if(e instanceof Buffer)return"buffer";if("function"==typeof e._read||"function"==typeof e._transform)return"stream";if("string"!=typeof e){const e=new Error("Type is not supported, must be a file path, file buffer, or a readable stream");throw e.name="IlligalSourceError",e}return"file"}}),t.destType=a;const u=new Error("Type is not supported, must be a file path, directory path, file buffer, or a readable stream");function f(e){return new Promise((t,r)=>{s(e[0],e[1],e=>{if(e)return r(e);t()})})}u.name="IlligalEntryError",t.entryType=(e=>{if(e){if(e instanceof Buffer)return"buffer";if("function"==typeof e._read||"function"==typeof e._transform)return"stream";if("string"!=typeof e)throw u;return"fileOrDir"}}),t.clone=(e=>{const t={};for(const r in e)t[r]=e[r];return t}),t.makeFileProcessFn=(e=>(t,r,i)=>{(i=i||{}).source=t;const o="path"===a(r)?n.createWriteStream(r):r;return f([new e(i),o])}),t.makeCompressDirFn=(e=>(t,r,i)=>{const o="path"===a(r)?n.createWriteStream(r):r,s=new e;return s.addEntry(t,i),f([s,o])}),t.makeUncompressFn=(e=>(t,r,u)=>{if((u=u||{}).source=t,"path"!==a(r)){const e=new Error("uncompress destination must be a directory");throw e.name="IlligalDestError",e}return new Promise((t,a)=>{o(r,f=>{if(f)return a(f);let l=0,c=0,d=!1;function h(){d&&l===c&&t()}new e(u).on("finish",()=>{d=!0,h()}).on("error",a).on("entry",(e,t,u)=>{if(t.on("end",u),"file"===e.type){const u=i.join(r,e.name);o(i.dirname(u),r=>{if(r)return a(r);l++,s(t,n.createWriteStream(u,{mode:e.mode}),e=>{if(e)return a(e);c++,h()})})}else o(i.join(r,e.name),e=>{if(e)return a(e);t.resume()})})})})}),t.streamToBuffer=(e=>new Promise((t,r)=>{const n=[];e.on("readable",()=>{let t;for(;t=e.read();)n.push(t)}).on("end",()=>t(Buffer.concat(n))).on("error",e=>r(e))})),t.safePipe=f,t.stripFileName=((e,t,r)=>{Buffer.isBuffer(t)&&(t=t.toString()),-1!==t.indexOf("\\")&&(t=t.replace(/\\+/g,"/")),"/"===t[0]&&(t=t.replace(/^\/+/,""));let n=t.split("/");return-1!==n.indexOf("..")&&(t=i.normalize(t),"win32"===process.platform&&(t=t.replace(/\\+/g,"/")),t=t.replace(/(\.\.\/)+/,""),"directory"===r&&t&&"/"!==t[t.length-1]&&(t+="/"),n=t.split("/")),e=Math.min(e,n.length-1),n.slice(e).join("/")||"/"})},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";var n=r(12),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=c;var o=r(9);o.inherits=r(10);var s=r(28),a=r(31);o.inherits(c,s);for(var u=i(a.prototype),f=0;f<u.length;f++){var l=u[f];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t){e.exports=require("events")},function(e,t,r){var n=r(0);"disable"===process.env.READABLE_STREAM&&n?(e.exports=n,(t=e.exports=n.Readable).Readable=n.Readable,t.Writable=n.Writable,t.Duplex=n.Duplex,t.Transform=n.Transform,t.PassThrough=n.PassThrough,t.Stream=n):((t=e.exports=r(28)).Stream=n||t,t.Readable=t,t.Writable=r(31),t.Duplex=r(5),t.Transform=r(33),t.PassThrough=r(55))},function(e,t,r){var n=r(26),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,r){try{var n=r(3);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(52)}},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick(function(){e.apply(null,i)})}}}:e.exports=process},function(e,t,r){"use strict";function n(e){if(this._ready=!!this._ready,this._readyCallbacks=this._readyCallbacks||[],0===arguments.length)return new Promise(function(e){if(this._ready)return e();this._readyCallbacks.push(e)}.bind(this));"function"==typeof e?this._readyCallbacks.push(e):this._ready=!!e,this._ready&&this._readyCallbacks.splice(0,1/0).forEach(function(e){process.nextTick(e)})}function i(e){e.ready=n}e.exports=i,e.exports.mixin=i},function(e,t,r){"use strict";const n=r(2),i=r(70),o=r(71);t.FileStream=i,t.UncompressStream=o,t.compressFile=n.makeFileProcessFn(i),t.uncompress=n.makeFileProcessFn(o)},function(e,t,r){"use strict";var n=r(3),i=r(0);e.exports.createReadStream=function(e,t){return new o(e,t)};var o=function(e,t){e instanceof Buffer||"string"==typeof e?(t=t||{},i.Readable.call(this,{highWaterMark:t.highWaterMark,encoding:t.encoding})):i.Readable.call(this,{objectMode:!0}),this._object=e};n.inherits(o,i.Readable),o.prototype._read=function(){this.push(this._object),this._object=null}},function(e,t,r){"use strict";const n=r(2),i=r(27),o=r(72),s=r(73);t.Stream=i,t.FileStream=o,t.UncompressStream=s,t.compressDir=n.makeCompressDirFn(i),t.compressFile=n.makeFileProcessFn(o),t.uncompress=n.makeUncompressFn(s)},function(e,t,r){t.extract=r(48),t.pack=r(59)},function(e,t){e.exports=require("vscode")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(18);t.logger=n.window.createOutputChannel("Cloud Studio Updator")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4);t.CS_VERSION_FILE_URL="IDE_VSCODE_VERSION_UPDATE_FILE",t.CS_CLI_PATH="/app/cli-linux-x64",t.CS_CLI_TMP_PATH=n.join("/tmp","code-server","cli-linux-x64"),t.CS_CLI_TAR_TMP_PATH=n.join("/tmp","code-server","cli-linux-x64.tar.gz")},function(e,t,r){var n=r(22),i=r(23),o=r(1),s=function(){},a=/^v?\.0/.test(process.version),u=function(e){return"function"==typeof e},f=function(e,t,r,f){f=n(f);var l=!1;e.on("close",function(){l=!0}),i(e,{readable:t,writable:r},function(e){if(e)return f(e);l=!0,f()});var c=!1;return function(t){if(!l&&!c)return c=!0,function(e){return!!a&&!!o&&(e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&u(e.close)}(e)?e.close(s):function(e){return e.setHeader&&u(e.abort)}(e)?e.abort():u(e.destroy)?e.destroy():void f(t||new Error("stream was destroyed"))}},l=function(e){e()},c=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=u(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map(function(i,o){var s=o<t.length-1;return f(i,s,o>0,function(t){e||(e=t),t&&n.forEach(l),s||(n.forEach(l),r(e))})});return t.reduce(c)}},function(e,t,r){var n=r(46);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t,r){var n=r(22),i=function(){},o=function(e,t,r){if("function"==typeof t)return o(e,null,t);t||(t={}),r=n(r||i);var s=e._writableState,a=e._readableState,u=t.readable||!1!==t.readable&&e.readable,f=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||c()},c=function(){f=!1,u||r.call(e)},d=function(){u=!1,f||r.call(e)},h=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},p=function(t){r.call(e,t)},m=function(){return(!u||a&&a.ended)&&(!f||s&&s.ended)?void 0:r.call(e,new Error("premature close"))},y=function(){e.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?f&&!s&&(e.on("end",l),e.on("close",l)):(e.on("complete",c),e.on("abort",m),e.req?y():e.on("request",y)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",h),e.on("end",d),e.on("finish",c),!1!==t.error&&e.on("error",p),e.on("close",m),function(){e.removeListener("complete",c),e.removeListener("abort",m),e.removeListener("request",y),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("exit",h),e.removeListener("end",d),e.removeListener("error",p),e.removeListener("close",m)}};e.exports=o},function(e,t,r){var n=r(1),i=r(0).Transform,o=r(0).PassThrough,s=r(11),a=r(3),u=r(6).EventEmitter,f=r(25);function l(){this.outputStream=new o,this.entries=[],this.outputStreamCursor=0,this.ended=!1,this.allDone=!1,this.forceZip64Eocd=!1}t.ZipFile=l,t.dateToDosDateTime=k,a.inherits(l,u),l.prototype.addFile=function(e,t,r){var i=this;t=w(t,!1),null==r&&(r={});var o=new b(t,!1,r);i.entries.push(o),n.stat(e,function(t,s){return t?i.emit("error",t):s.isFile()?(o.uncompressedSize=s.size,null==r.mtime&&o.setLastModDate(s.mtime),null==r.mode&&o.setFileAttributesMode(s.mode),o.setFileDataPumpFunction(function(){var t=n.createReadStream(e);o.state=b.FILE_DATA_IN_PROGRESS,t.on("error",function(e){i.emit("error",e)}),h(i,o,t)}),void p(i)):i.emit("error",new Error("not a file: "+e))})},l.prototype.addReadStream=function(e,t,r){var n=this;null==r&&(r={});var i=new b(t=w(t,!1),!1,r);n.entries.push(i),i.setFileDataPumpFunction(function(){i.state=b.FILE_DATA_IN_PROGRESS,h(n,i,e)}),p(n)},l.prototype.addBuffer=function(e,t,r){var n=this;if(t=w(t,!1),e.length>1073741823)throw new Error("buffer too large: "+e.length+" > 1073741823");if(null==r&&(r={}),null!=r.size)throw new Error("options.size not allowed");var i=new b(t,!1,r);function o(e){i.compressedSize=e.length,i.setFileDataPumpFunction(function(){d(n,e),d(n,i.getDataDescriptor()),i.state=b.FILE_DATA_DONE,setImmediate(function(){p(n)})}),p(n)}i.uncompressedSize=e.length,i.crc32=f.unsigned(e),i.crcAndFileSizeKnown=!0,n.entries.push(i),i.compress?s.deflateRaw(e,function(e,t){o(t)}):o(e)},l.prototype.addEmptyDirectory=function(e,t){var r=this;if(e=w(e,!0),null==t&&(t={}),null!=t.size)throw new Error("options.size not allowed");if(null!=t.compress)throw new Error("options.compress not allowed");var n=new b(e,!0,t);r.entries.push(n),n.setFileDataPumpFunction(function(){d(r,n.getDataDescriptor()),n.state=b.FILE_DATA_DONE,p(r)}),p(r)};var c=U([80,75,5,6]);function d(e,t){e.outputStream.write(t),e.outputStreamCursor+=t.length}function h(e,t,r){var n=new T,i=new I,a=t.compress?new s.DeflateRaw:new o,u=new I;r.pipe(n).pipe(i).pipe(a).pipe(u).pipe(e.outputStream,{end:!1}),u.on("end",function(){if(t.crc32=n.crc32,null==t.uncompressedSize)t.uncompressedSize=i.byteCount;else if(t.uncompressedSize!==i.byteCount)return e.emit("error",new Error("file data stream has unexpected number of bytes"));t.compressedSize=u.byteCount,e.outputStreamCursor+=t.compressedSize,d(e,t.getDataDescriptor()),t.state=b.FILE_DATA_DONE,p(e)})}function p(e){if(!e.allDone){if(e.ended&&null!=e.finalSizeCallback){var t=function(e){for(var t=0,r=0,n=0;n<e.entries.length;n++){var i=e.entries[n];if(i.compress)return-1;if(i.state>=b.READY_TO_PUMP_FILE_DATA){if(null==i.uncompressedSize)return-1}else if(null==i.uncompressedSize)return null;i.relativeOffsetOfLocalHeader=t;var o=i.useZip64Format();t+=v+i.utf8FileName.length,t+=i.uncompressedSize,i.crcAndFileSizeKnown||(t+=o?L:x),r+=C+i.utf8FileName.length+i.fileComment.length,o&&(r+=z)}var s=0;(e.forceZip64Eocd||e.entries.length>=65535||r>=65535||t>=4294967295)&&(s+=m+y);return s+=g+e.comment.length,t+r+s}(e);null!=t&&(e.finalSizeCallback(t),e.finalSizeCallback=null)}var r=function(){for(var t=0;t<e.entries.length;t++){var r=e.entries[t];if(r.state<b.FILE_DATA_DONE)return r}return null}();if(null!=r){if(r.state<b.READY_TO_PUMP_FILE_DATA)return;if(r.state===b.FILE_DATA_IN_PROGRESS)return;r.relativeOffsetOfLocalHeader=e.outputStreamCursor;var n=r.getLocalFileHeader();d(e,n),r.doFileDataPump()}else e.ended&&(e.offsetOfStartOfCentralDirectory=e.outputStreamCursor,e.entries.forEach(function(t){var r=t.getCentralDirectoryRecord();d(e,r)}),d(e,function(e,t){var r=!1,n=e.entries.length;(e.forceZip64Eocd||e.entries.length>=65535)&&(n=65535,r=!0);var i=e.outputStreamCursor-e.offsetOfStartOfCentralDirectory,o=i;(e.forceZip64Eocd||i>=4294967295)&&(o=4294967295,r=!0);var s=e.offsetOfStartOfCentralDirectory;(e.forceZip64Eocd||e.offsetOfStartOfCentralDirectory>=4294967295)&&(s=4294967295,r=!0);if(t)return r?m+y+g:g;var a=M(g+e.comment.length);if(a.writeUInt32LE(101010256,0),a.writeUInt16LE(0,4),a.writeUInt16LE(0,6),a.writeUInt16LE(n,8),a.writeUInt16LE(n,10),a.writeUInt32LE(o,12),a.writeUInt32LE(s,16),a.writeUInt16LE(e.comment.length,20),e.comment.copy(a,22),!r)return a;var u=M(m);u.writeUInt32LE(101075792,0),F(u,m-12,4),u.writeUInt16LE(S,12),u.writeUInt16LE(E,14),u.writeUInt32LE(0,16),u.writeUInt32LE(0,20),F(u,e.entries.length,24),F(u,e.entries.length,32),F(u,i,40),F(u,e.offsetOfStartOfCentralDirectory,48);var f=M(y);return f.writeUInt32LE(117853008,0),f.writeUInt32LE(0,4),F(f,e.outputStreamCursor,8),f.writeUInt32LE(1,16),Buffer.concat([u,f,a])}(e)),e.outputStream.end(),e.allDone=!0)}}l.prototype.end=function(e,t){if("function"==typeof e&&(t=e,e=null),null==e&&(e={}),!this.ended){if(this.ended=!0,this.finalSizeCallback=t,this.forceZip64Eocd=!!e.forceZip64Format,e.comment){if("string"==typeof e.comment?this.comment=function(e){if(/^[\x20-\x7e]*$/.test(e))return U(e,"utf-8");if(null==R){R={};for(var t=0;t<P.length;t++)R[P[t]]=t}for(var r=M(e.length),t=0;t<e.length;t++){var n=R[e[t]];if(null==n)throw new Error("character not encodable in CP437: "+JSON.stringify(e[t]));r[t]=n}return r}(e.comment):this.comment=e.comment,this.comment.length>65535)throw new Error("comment is too large");if(O(this.comment,c))throw new Error("comment contains end of central directory record signature")}else this.comment=_;p(this)}};var m=56,y=20,g=22;function w(e,t){if(""===e)throw new Error("empty metadataPath");if(e=e.replace(/\\/g,"/"),/^[a-zA-Z]:/.test(e)||/^\//.test(e))throw new Error("absolute path: "+e);if(-1!==e.split("/").indexOf(".."))throw new Error("invalid relative path: "+e);var r=/\/$/.test(e);if(t)r||(e+="/");else if(r)throw new Error("file path cannot end with '/': "+e);return e}var _=M(0);function b(e,t,r){if(this.utf8FileName=U(e),this.utf8FileName.length>65535)throw new Error("utf8 file name too long. "+utf8FileName.length+" > 65535");if(this.isDirectory=t,this.state=b.WAITING_FOR_METADATA,this.setLastModDate(null!=r.mtime?r.mtime:new Date),null!=r.mode?this.setFileAttributesMode(r.mode):this.setFileAttributesMode(t?16893:33204),t?(this.crcAndFileSizeKnown=!0,this.crc32=0,this.uncompressedSize=0,this.compressedSize=0):(this.crcAndFileSizeKnown=!1,this.crc32=null,this.uncompressedSize=null,this.compressedSize=null,null!=r.size&&(this.uncompressedSize=r.size)),t?this.compress=!1:(this.compress=!0,null!=r.compress&&(this.compress=!!r.compress)),this.forceZip64Format=!!r.forceZip64Format,r.fileComment){if("string"==typeof r.fileComment?this.fileComment=U(r.fileComment,"utf-8"):this.fileComment=r.fileComment,this.fileComment.length>65535)throw new Error("fileComment is too large")}else this.fileComment=_}b.WAITING_FOR_METADATA=0,b.READY_TO_PUMP_FILE_DATA=1,b.FILE_DATA_IN_PROGRESS=2,b.FILE_DATA_DONE=3,b.prototype.setLastModDate=function(e){var t=k(e);this.lastModFileTime=t.time,this.lastModFileDate=t.date},b.prototype.setFileAttributesMode=function(e){if((65535&e)!==e)throw new Error("invalid mode. expected: 0 <= "+e+" <= 65535");this.externalFileAttributes=e<<16>>>0},b.prototype.setFileDataPumpFunction=function(e){this.doFileDataPump=e,this.state=b.READY_TO_PUMP_FILE_DATA},b.prototype.useZip64Format=function(){return this.forceZip64Format||null!=this.uncompressedSize&&this.uncompressedSize>4294967294||null!=this.compressedSize&&this.compressedSize>4294967294||null!=this.relativeOffsetOfLocalHeader&&this.relativeOffsetOfLocalHeader>4294967294};var v=30,E=45,S=831;b.prototype.getLocalFileHeader=function(){var e=0,t=0,r=0;this.crcAndFileSizeKnown&&(e=this.crc32,t=this.compressedSize,r=this.uncompressedSize);var n=M(v),i=2048;return this.crcAndFileSizeKnown||(i|=8),n.writeUInt32LE(67324752,0),n.writeUInt16LE(20,4),n.writeUInt16LE(i,6),n.writeUInt16LE(this.getCompressionMethod(),8),n.writeUInt16LE(this.lastModFileTime,10),n.writeUInt16LE(this.lastModFileDate,12),n.writeUInt32LE(e,14),n.writeUInt32LE(t,18),n.writeUInt32LE(r,22),n.writeUInt16LE(this.utf8FileName.length,26),n.writeUInt16LE(0,28),Buffer.concat([n,this.utf8FileName])};var x=16,L=24;b.prototype.getDataDescriptor=function(){return this.crcAndFileSizeKnown?_:this.useZip64Format()?((e=M(L)).writeUInt32LE(134695760,0),e.writeUInt32LE(this.crc32,4),F(e,this.compressedSize,8),F(e,this.uncompressedSize,16),e):((e=M(x)).writeUInt32LE(134695760,0),e.writeUInt32LE(this.crc32,4),e.writeUInt32LE(this.compressedSize,8),e.writeUInt32LE(this.uncompressedSize,12),e);var e};var C=46,z=28;function k(e){var t=0;t|=31&e.getDate(),t|=(e.getMonth()+1&15)<<5,t|=(e.getFullYear()-1980&127)<<9;var r=0;return r|=Math.floor(e.getSeconds()/2),r|=(63&e.getMinutes())<<5,{date:t,time:r|=(31&e.getHours())<<11}}function F(e,t,r){var n=Math.floor(t/4294967296),i=t%4294967296;e.writeUInt32LE(i,r),e.writeUInt32LE(n,r+4)}function I(e){i.call(this,e),this.byteCount=0}function T(e){i.call(this,e),this.crc32=0}b.prototype.getCentralDirectoryRecord=function(){var e=M(C),t=2048;this.crcAndFileSizeKnown||(t|=8);var r,n,i=this.compressedSize,o=this.uncompressedSize,s=this.relativeOffsetOfLocalHeader;return this.useZip64Format()?(i=4294967295,o=4294967295,s=4294967295,r=E,(n=M(z)).writeUInt16LE(1,0),n.writeUInt16LE(z-4,2),F(n,this.uncompressedSize,4),F(n,this.compressedSize,12),F(n,this.relativeOffsetOfLocalHeader,20)):(r=20,n=_),e.writeUInt32LE(33639248,0),e.writeUInt16LE(S,4),e.writeUInt16LE(r,6),e.writeUInt16LE(t,8),e.writeUInt16LE(this.getCompressionMethod(),10),e.writeUInt16LE(this.lastModFileTime,12),e.writeUInt16LE(this.lastModFileDate,14),e.writeUInt32LE(this.crc32,16),e.writeUInt32LE(i,20),e.writeUInt32LE(o,24),e.writeUInt16LE(this.utf8FileName.length,28),e.writeUInt16LE(n.length,30),e.writeUInt16LE(this.fileComment.length,32),e.writeUInt16LE(0,34),e.writeUInt16LE(0,36),e.writeUInt32LE(this.externalFileAttributes,38),e.writeUInt32LE(s,42),Buffer.concat([e,this.utf8FileName,n,this.fileComment])},b.prototype.getCompressionMethod=function(){return this.compress?8:0},a.inherits(I,i),I.prototype._transform=function(e,t,r){this.byteCount+=e.length,r(null,e)},a.inherits(T,i),T.prototype._transform=function(e,t,r){this.crc32=f.unsigned(e,this.crc32),r(null,e)};var P="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";if(256!==P.length)throw new Error("assertion failure");var R=null;function M(e){M=function(e){return Buffer.allocUnsafe(e)};try{return M(e)}catch(t){return(M=function(e){return new Buffer(e)})(e)}}function U(e,t){U=function(e,t){return Buffer.from(e,t)};try{return U(e,t)}catch(r){return(U=function(e,t){return new Buffer(e,t)})(e,t)}}function O(e,t){O=function(e,t){return e.includes(t)};try{return O(e,t)}catch(r){return(O=function(e,t){for(var r=0;r<=e.length-t.length;r++)for(var n=0;;n++){if(n===t.length)return!0;if(e[r+n]!==t[n])break}return!1})(e,t)}}},function(e,t,r){var n=r(26).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(e){if(n.isBuffer(e))return e;var t="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof e)return t?n.alloc(e):new n(e);if("string"==typeof e)return t?n.from(e):new n(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function s(e,t){e=o(e),n.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=-1^~~t,s=0;s<e.length;s++)r=i[255&(r^e[s])]^r>>>8;return-1^r}function a(){return e=s.apply(null,arguments),(t=o(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},e.exports=a},function(e,t){e.exports=require("buffer")},function(e,t,r){"use strict";const n=r(1),i=r(4),o=r(0),s=r(17),a=r(2),u=r(37);e.exports=class extends u{constructor(e){super(e),this._waitingEntries=[],this._processing=!1,this._init(e)}_init(){const e=this._pack=s.pack();e.on("end",()=>this.push(null)),e.on("data",e=>this.push(e)),e.on("error",e=>this.emit("error",e))}addEntry(e,t){if(this._processing)return this._waitingEntries.push([e,t]);t=t||{},this._processing=!0;const r=a.entryType(e);r&&("fileOrDir"===r?this._addFileOrDirEntry(e,t):"buffer"===r?this._addBufferEntry(e,t):this._addStreamEntry(e,t))}_addFileOrDirEntry(e,t){n.stat(e,(r,n)=>{if(r)return this.emit("error",r);if(n.isDirectory())return this._addDirEntry(e,t);if(n.isFile())return this._addFileEntry(e,t);const i=new Error("Type is not supported, must be a file path, directory path, file buffer, or a readable stream");i.name="IlligalEntryError",this.emit("error",i)})}_addFileEntry(e,t){n.stat(e,(r,o)=>{if(r)return this.emit("error",r);const s=this._pack.entry({name:t.relativePath||i.basename(e),size:o.size,mode:511&o.mode},this._onEntryFinish.bind(this)),a=n.createReadStream(e,t.fs);a.on("error",e=>this.emit("error",e)),a.pipe(s)})}_addDirEntry(e,t){n.readdir(e,(r,n)=>{if(r)return this.emit("error",r);const o=t.relativePath||"";n.forEach(r=>{const n=a.clone(t);t.ignoreBase?n.relativePath=i.join(o,r):n.relativePath=i.join(o,i.basename(e),r),n.ignoreBase=!0,this.addEntry(i.join(e,r),n)}),this._onEntryFinish()})}_addBufferEntry(e,t){if(!t.relativePath)return this.emit("error","opts.relativePath is required if entry is a buffer");this._pack.entry({name:t.relativePath},e,this._onEntryFinish.bind(this))}_addStreamEntry(e,t){if(e.on("error",e=>this.emit("error",e)),!t.relativePath)return this.emit("error",new Error("opts.relativePath is required"));if(t.size){const r=this._pack.entry({name:t.relativePath,size:t.size},this._onEntryFinish.bind(this));e.pipe(r)}else{t.suppressSizeWarning||console.warn("You should specify the size of streamming data by opts.size to prevent all streaming data from loading into memory. If you are sure about memory cost, pass opts.supressSizeWarning: true to suppress this warning");const r=[],n=new o.Writable({write(e,t,n){r.push(e),n()}});n.on("error",e=>this.emit("error",e)),n.on("finish",()=>{this._pack.entry({name:t.relativePath},Buffer.concat(r),this._onEntryFinish.bind(this))}),e.pipe(n)}}_read(){}_onEntryFinish(e){if(e)return this.emit("error",e);this._processing=!1;const t=this._waitingEntries.shift();t?this.addEntry.apply(this,t):this._finalize()}_finalize(){this._pack.finalize()}}},function(e,t,r){"use strict";var n=r(12);e.exports=w;var i,o=r(51);w.ReadableState=g;r(6).EventEmitter;var s=function(e,t){return e.listeners(t).length},a=r(29),u=r(8).Buffer,f=global.Uint8Array||function(){};var l=r(9);l.inherits=r(10);var c=r(3),d=void 0;d=c&&c.debuglog?c.debuglog("stream"):function(){};var h,p=r(53),m=r(30);l.inherits(w,a);var y=["error","close","destroy","pause","resume"];function g(e,t){e=e||{};var n=t instanceof(i=i||r(5));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(32).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function w(e){if(i=i||r(5),!(this instanceof w))return new w(e);this._readableState=new g(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function _(e,t,r,n,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}(e,s)):(i||(o=function(e,t){var r;n=t,u.isBuffer(n)||n instanceof f||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):b(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?b(e,s,t,!1):L(e,s)):b(e,s,t,!1))):n||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function b(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),L(e,t)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=m.destroy,w.prototype._undestroy=m.undestroy,w.prototype._destroy=function(e,t){this.push(null),t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},w.prototype.unshift=function(e){return _(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){return h||(h=r(32).StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=e,this};var v=8388608;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=v?e=v:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(x,e):x(e))}function x(e){d("emit readable"),e.emit("readable"),F(e)}function L(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function z(e){d("readable nexttick read 0"),e.read(0)}function k(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function T(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):S(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&T(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(r,t))),null===(n=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&T(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,d("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?f:w;function u(t,n){d("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,d("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",f),r.removeListener("end",w),r.removeListener("data",p),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function f(){d("onend"),e.end()}i.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",u);var l=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,F(e))}}(r);e.on("drain",l);var c=!1;var h=!1;function p(t){d("ondata"),h=!1,!1!==e.write(t)||h||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==R(i.pipes,e))&&!c&&(d("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function m(t){d("onerror",t),w(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",g),w()}function g(){d("onfinish"),e.removeListener("close",y),w()}function w(){d("unpipe"),r.unpipe(e)}return r.on("data",p),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",y),e.once("finish",g),e.emit("pipe",r),i.flowing||(d("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=R(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},w.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):n.nextTick(z,this))}return r},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(k,e,t))}(this,e)),this},w.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<y.length;o++)e.on(y[o],this.emit.bind(this,y[o]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=I},function(e,t,r){e.exports=r(0)},function(e,t,r){"use strict";var n=r(12);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";var n=r(12);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var o,s=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n.nextTick;y.WritableState=m;var a=r(9);a.inherits=r(10);var u={deprecate:r(54)},f=r(29),l=r(8).Buffer,c=global.Uint8Array||function(){};var d,h=r(30);function p(){}function m(e,t){o=o||r(5),e=e||{};var a=t instanceof o;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var u=e.highWaterMark,f=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(f||0===f)?f:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),E(e,t))}(e,r,i,t,o);else{var a=b(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),i?s(w,e,r,a,o):w(e,r,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function y(e){if(o=o||r(5),!(d.call(y,this)||this instanceof o))return new y(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function g(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),E(e,t)}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,g(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,l=r.encoding,c=r.callback;if(g(e,t,!1,t.objectMode?1:f.length,f,l,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),E(e,t)})}function E(e,t){var r=b(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(v,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}a.inherits(y,f),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===y&&(e&&e._writableState instanceof m)}})):d=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,l.isBuffer(i)||i instanceof c);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=p),o.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,n,i,o);return u}(this,o,a,e,t,r)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=h.destroy,y.prototype._undestroy=h.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,r){"use strict";var n=r(8).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=f,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=c,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=s;var n=r(5),i=r(9);function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){u(e,t,r)}):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(10),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){var n=r(35),i=r(36),o="0".charCodeAt(0),s=parseInt("7777",8),a=function(e,t,r,n){for(;r<n;r++)if(e[r]===t)return r;return n},u=function(e){for(var t=256,r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t},f=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var l=function(e,t,r){if(128&(e=e.slice(t,t+r))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var r=!1,n=[],i=e.length-1;i>0;i--){var o=e[i];t?n.push(o):r&&0===o?n.push(0):r?(r=!1,n.push(256-o)):n.push(255-o)}var s=0,a=n.length;for(i=0;i<a;i++)s+=n[i]*Math.pow(256,i);return t?s:-1*s}(e);for(;t<e.length&&32===e[t];)t++;for(var n=(i=a(e,32,t,e.length),o=e.length,s=e.length,"number"!=typeof i?s:(i=~~i)>=o?o:i>=0?i:(i+=o)>=0?i:0);t<n&&0===e[t];)t++;return n===t?0:parseInt(e.slice(t,n).toString(),8);var i,o,s},c=function(e,t,r,n){return e.slice(t,a(e,0,t,t+r)).toString(n)},d=function(e){var t=Buffer.byteLength(e),r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,t+r+e};t.decodeLongPath=function(e,t){return c(e,0,e.length,t)},t.encodePax=function(e){var t="";e.name&&(t+=d(" path="+e.name+"\n")),e.linkname&&(t+=d(" linkpath="+e.linkname+"\n"));var r=e.pax;if(r)for(var i in r)t+=d(" "+i+"="+r[i]+"\n");return n(t)},t.decodePax=function(e){for(var t={};e.length;){for(var r=0;r<e.length&&32!==e[r];)r++;var n=parseInt(e.slice(0,r).toString(),10);if(!n)return t;var i=e.slice(r+1,n-1).toString(),o=i.indexOf("=");if(-1===o)return t;t[i.slice(0,o)]=i.slice(o+1),e=e.slice(n)}return t},t.encode=function(e){var t=i(512),r=e.name,n="";if(5===e.typeflag&&"/"!==r[r.length-1]&&(r+="/"),Buffer.byteLength(r)!==r.length)return null;for(;Buffer.byteLength(r)>100;){var a=r.indexOf("/");if(-1===a)return null;n+=n?"/"+r.slice(0,a):r.slice(0,a),r=r.slice(a+1)}return Buffer.byteLength(r)>100||Buffer.byteLength(n)>155?null:e.linkname&&Buffer.byteLength(e.linkname)>100?null:(t.write(r),t.write(f(e.mode&s,6),100),t.write(f(e.uid,6),108),t.write(f(e.gid,6),116),t.write(f(e.size,11),124),t.write(f(e.mtime.getTime()/1e3|0,11),136),t[156]=o+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&t.write(e.linkname,157),t.write("ustar\x0000",257),e.uname&&t.write(e.uname,265),e.gname&&t.write(e.gname,297),t.write(f(e.devmajor||0,6),329),t.write(f(e.devminor||0,6),337),n&&t.write(n,345),t.write(f(u(t),6),148),t)},t.decode=function(e,t){var r=0===e[156]?0:e[156]-o,n=c(e,0,100,t),i=l(e,100,8),s=l(e,108,8),a=l(e,116,8),f=l(e,124,12),d=l(e,136,12),h=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(r),p=0===e[157]?null:c(e,157,100,t),m=c(e,265,32),y=c(e,297,32),g=l(e,329,8),w=l(e,337,8);e[345]&&(n=c(e,345,155,t)+"/"+n),0===r&&n&&"/"===n[n.length-1]&&(r=5);var _=u(e);if(256===_)return null;if(_!==l(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");return{name:n,mode:i,uid:s,gid:a,size:f,mtime:new Date(1e3*d),type:h,linkname:p,uname:m,gname:y,devmajor:g,devminor:w}}},function(e,t){e.exports=function(e,t){if(Buffer.isBuffer(e))return e;if("string"==typeof e)return r(e,t);if(Array.isArray(e))return r(e);throw new Error("Input should be a buffer or a string")};var r=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from:function(e,t){return new Buffer(e,t)}},function(e,t,r){var n=r(57),i=r(58);e.exports=function(e,t,r){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(e,t,r);var o=i(e);return 0===e?o:void 0===t?n(o,0):("string"!=typeof r&&(r=void 0),n(o,t,r))}},function(e,t,r){"use strict";const n=r(0);e.exports=class extends n.Readable{addEntry(){throw new Error(".addEntry not implemented in sub class!")}_read(){}emit(e,t){if("error"===e){const e=t;"Error"===e.name&&(e.name=this.constructor.name+"Error")}super.emit(e,t)}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=r(18),o=r(19),s=r(20),a=r(39),u=r(1);t.activate=function(e){return n(this,void 0,void 0,function*(){const t=i.workspace.getConfiguration("auto-updator").get("Update Mode");if(e.subscriptions.push(i.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("auto-updator")&&i.workspace.getConfiguration("auto-updator").get("Update Mode")&&o.logger.appendLine("Auto update is enabled.")})),t){o.logger.appendLine("Check for updates...");const e=process.env[s.CS_VERSION_FILE_URL];if(e){const t=yield a.fetchVersionDetail(e),r=yield a.computedHash(s.CS_CLI_PATH);if(o.logger.appendLine(`${s.CS_CLI_PATH} sha1: ${r}`),t.sha1sum!==r){if(o.logger.appendLine(`New version ${t.version} is available.`),yield a.downloadNewCli(t.url),u.existsSync(s.CS_CLI_TMP_PATH)){o.logger.appendLine(`Download file success, path: ${s.CS_CLI_TMP_PATH}`);const e=yield a.computedHash(s.CS_CLI_TMP_PATH),r=e===t.sha1sum;if(o.logger.appendLine(`Calibration sha1: ${r?"success":"failed"}`),r){const e=["sudo","cp","-f",s.CS_CLI_TMP_PATH,s.CS_CLI_PATH],t=yield a.execute(e.join(" "));if(0!==t.exitCode)return o.logger.appendLine(`\n\tERROR: Failed to replace file.\n\t${t.stderr}\n\t\t\t\t\t\t\t`),!1;o.logger.appendLine("Replace file success.");const r=["sudo","chmod","+x",s.CS_CLI_PATH],n=yield a.execute(r.join(" "));if(0!==n.exitCode)return o.logger.appendLine(`\n\tERROR: Failed to execute chmod: ${s.CS_CLI_PATH}.\n\t${n.stderr}\n\t\t\t\t\t\t\t`),!1;const i=["rm","-f",s.CS_CLI_TAR_TMP_PATH,s.CS_CLI_TMP_PATH],u=yield a.execute(i.join(" "));0!==u.exitCode&&o.logger.appendLine(`WARN: Failed to remove file: ${s.CS_CLI_TAR_TMP_PATH} ${s.CS_CLI_TMP_PATH}, ${u.stderr}`),o.logger.appendLine("Operate success.")}else o.logger.appendLine(`Calibration sha1 failed, expected: ${t.sha1sum}, actual${e}.`)}}else o.logger.appendLine("There are currently no updates available.")}else o.logger.appendLine("ERROR: Unable to get the latest version information from server.")}else o.logger.appendLine("Automatic updates is disabled.")})},t.deactivate=function(){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(40),o=r(41),s=r(4),a=r(42),u=r(43),f=r(19),l=r(20);function c(e){return f.logger.appendLine(e.message||""),!1}function d(e,t,r){f.logger.appendLine("uncompressing..."),t.on("end",r),"file"===e.type&&t.pipe(n.createWriteStream(l.CS_CLI_TMP_PATH))}t.computedHash=function(e){return new Promise((t,r)=>{const o=n.createReadStream(e),s=i.createHash("sha1");o.on("data",e=>{s.update(e)}),o.on("end",()=>{const e=s.digest("hex");t(e)}),o.on("error",e=>{r(e.message||"Failed.")})})},t.fetchVersionDetail=function(e){return new Promise((t,r)=>{o.get(e,e=>{let n="";e.on("data",function(e){n+=e}),e.on("end",function(){try{const e=JSON.parse(n);t(e),f.logger.appendLine(`\nvesion: ${e.version}\nsha1: ${e.sha1sum}\ndescription: ${e.description}\n                    `)}catch(e){console.log(e),r(e.message||"fetchVersionDetail Fail.")}})})})},t.downloadNewCli=function(e){f.logger.appendLine("Download file...");const t=n.createWriteStream(l.CS_CLI_TAR_TMP_PATH);return new Promise((r,n)=>{o.get(e,e=>{e.on("data",e=>{f.logger.append("=")}),e.pipe(t),t.addListener("finish",()=>{f.logger.appendLine(`${s.basename(l.CS_CLI_TAR_TMP_PATH)} download success.`),new u.tgz.UncompressStream({source:l.CS_CLI_TAR_TMP_PATH}).on("error",c).on("finish",()=>{f.logger.appendLine("Uncompress success."),r()}).on("entry",d)}),e.on("error",e=>{n(e.message)})})})},t.execute=function(e,t){return new Promise((r,n)=>{const i=[],o=[],s=a.exec(e,t,e=>{null!==e&&n(e.message||"Execute failed.")});s.stdout.on("data",e=>{i.push(e),f.logger.appendLine(e)}),s.stderr.on("data",e=>{o.push(e),f.logger.appendLine(e)}),s.on("exit",e=>{r({exitCode:e||0,stdout:i.join(""),stderr:o.join("")})})})}},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("child_process")},function(e,t,r){"use strict";t.zip=r(44),t.gzip=r(14),t.tar=r(16),t.tgz=r(74)},function(e,t,r){"use strict";const n=r(2),i=r(47),o=r(63),s=r(65);t.Stream=i,t.FileStream=o,t.UncompressStream=s,t.compressDir=n.makeCompressDirFn(i),t.compressFile=n.makeFileProcessFn(o),t.uncompress=n.makeUncompressFn(s)},function(e,t,r){var n=r(4),i=r(1),o=parseInt("0777",8);function s(e,t,r,a){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var u=t.mode,f=t.fs||i;void 0===u&&(u=o&~process.umask()),a||(a=null);var l=r||function(){};e=n.resolve(e),f.mkdir(e,u,function(r){if(!r)return l(null,a=a||e);switch(r.code){case"ENOENT":s(n.dirname(e),t,function(r,n){r?l(r,n):s(e,t,l,n)});break;default:f.stat(e,function(e,t){e||!t.isDirectory()?l(r,a):l(null,a)})}})}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(t,r,s){r&&"object"==typeof r||(r={mode:r});var a=r.mode,u=r.fs||i;void 0===a&&(a=o&~process.umask()),s||(s=null),t=n.resolve(t);try{u.mkdirSync(t,a),s=s||t}catch(i){switch(i.code){case"ENOENT":s=e(n.dirname(t),r,s),e(t,r,s);break;default:var f;try{f=u.statSync(t)}catch(e){throw i}if(!f.isDirectory())throw i}}return s}},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){n[e]=t[e]});return n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}}},function(e,t,r){"use strict";const n=r(4),i=r(24),o=r(27);e.exports=class extends o{_init(){const e=(this._zipfile=new i.ZipFile).outputStream;e.on("end",()=>this.push(null)),e.on("data",e=>this.push(e)),e.on("error",e=>this.emit("error",e))}_addFileEntry(e,t){this._zipfile.addFile(e,t.relativePath||n.basename(e),t),this._onEntryFinish()}_addBufferEntry(e,t){if(!t.relativePath)return this.emit("error",new Error("opts.relativePath is required if entry is a buffer"));this._zipfile.addBuffer(e,t.relativePath,t),this._onEntryFinish()}_addStreamEntry(e,t){if(!t.relativePath)return this.emit("error",new Error("opts.relativePath is required if entry is a stream"));e.on("error",e=>this.emit("error",e)),this._zipfile.addReadStream(e,t.relativePath,t),this._onEntryFinish()}_finalize(){this._zipfile.end()}}},function(e,t,r){var n=r(3),i=r(49),o=r(56),s=r(34),a=r(7).Writable,u=r(7).PassThrough,f=function(){},l=function(e){return(e&=511)&&512-e},c=function(e,t){this._parent=e,this.offset=t,u.call(this)};n.inherits(c,u),c.prototype.destroy=function(e){this._parent.destroy(e)};var d=function(e){if(!(this instanceof d))return new d(e);a.call(this,e),e=e||{},this._offset=0,this._buffer=i(),this._missing=0,this._partial=!1,this._onparse=f,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,r=t._buffer,n=function(){t._continue()},u=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||n()},h=function(){t._stream=null;var e=l(t._header.size);e?t._parse(e,p):t._parse(512,_),t._locked||n()},p=function(){t._buffer.consume(l(t._header.size)),t._parse(512,_),n()},m=function(){var e=t._header.size;t._paxGlobal=s.decodePax(r.slice(0,e)),r.consume(e),h()},y=function(){var e=t._header.size;t._pax=s.decodePax(r.slice(0,e)),t._paxGlobal&&(t._pax=o(t._paxGlobal,t._pax)),r.consume(e),h()},g=function(){var n=t._header.size;this._gnuLongPath=s.decodeLongPath(r.slice(0,n),e.filenameEncoding),r.consume(n),h()},w=function(){var n=t._header.size;this._gnuLongLinkPath=s.decodeLongPath(r.slice(0,n),e.filenameEncoding),r.consume(n),h()},_=function(){var i,o=t._offset;try{i=t._header=s.decode(r.slice(0,512),e.filenameEncoding)}catch(e){t.emit("error",e)}return r.consume(512),i?"gnu-long-path"===i.type?(t._parse(i.size,g),void n()):"gnu-long-link-path"===i.type?(t._parse(i.size,w),void n()):"pax-global-header"===i.type?(t._parse(i.size,m),void n()):"pax-header"===i.type?(t._parse(i.size,y),void n()):(t._gnuLongPath&&(i.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(i.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=i=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(i,t._pax),t._pax=null),t._locked=!0,i.size&&"directory"!==i.type?(t._stream=new c(t,o),t.emit("entry",i,t._stream,u),t._parse(i.size,h),void n()):(t._parse(512,_),void t.emit("entry",i,function(e,t){var r=new c(e,t);return r.end(),r}(t,o),u))):(t._parse(512,_),void n())};this._onheader=_,this._parse(512,_)};n.inherits(d,a),d.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},d.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},d.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=f,this._overflow?this._write(this._overflow,void 0,e):e()}},d.prototype._write=function(e,t,r){if(!this._destroyed){var n=this._stream,i=this._buffer,o=this._missing;if(e.length&&(this._partial=!0),e.length<o)return this._missing-=e.length,this._overflow=null,n?n.write(e,r):(i.append(e),r());this._cb=r,this._missing=0;var s=null;e.length>o&&(s=e.slice(o),e=e.slice(0,o)),n?n.end(e):i.append(e),this._overflow=s,this._onparse()}},d.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},e.exports=d},function(e,t,r){var n=r(50),i=r(3),o=r(8).Buffer;function s(e){if(!(this instanceof s))return new s(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else this.append(e);n.call(this)}i.inherits(s,n),s.prototype._offset=function(e){var t,r=0,n=0;if(0===e)return[0,0];for(;n<this._bufs.length;n++){if(e<(t=r+this._bufs[n].length)||n==this._bufs.length-1)return[n,e-r];r=t}},s.prototype.append=function(e){var t=0;if(o.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof s)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(o.from(e)));return this},s.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},s.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(e){return this.slice(e,e+1)[0]},s.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},s.prototype.copy=function(e,t,r,n){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof n||n>this.length)&&(n=this.length),r>=this.length)return e||o.alloc(0);if(n<=0)return e||o.alloc(0);var i,s,a=!!e,u=this._offset(r),f=n-r,l=f,c=a&&t||0,d=u[1];if(0===r&&n==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,c),c+=this._bufs[s].length;return e}if(l<=this._bufs[u[0]].length-d)return a?this._bufs[u[0]].copy(e,t,d,d+l):this._bufs[u[0]].slice(d,d+l);for(a||(e=o.allocUnsafe(f)),s=u[0];s<this._bufs.length;s++){if(!(l>(i=this._bufs[s].length-d))){this._bufs[s].copy(e,c,d,d+l);break}this._bufs[s].copy(e,c,d),c+=i,l-=i,d&&(d=0)}return e},s.prototype.shallowSlice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0==n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!=r[1]&&(i[0]=i[0].slice(r[1])),new s(i)},s.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},s.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var e=0,t=new s;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){s.prototype[t]=function(r){return this.slice(r,r+e[t])[t](0)}}(t)}(),e.exports=s},function(e,t,r){e.exports=r(7).Duplex},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";var n=r(8).Buffer,i=r(3);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=o,i=a,t.copy(r,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,r){e.exports=r(3).deprecate},function(e,t,r){"use strict";e.exports=o;var n=r(33),i=r(9);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(10),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},function(e,t){var r=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var e=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return e.fill("ab","ucs2"),"61006200"===e.toString("hex")}catch(e){return!1}}();function n(e,t,r,n){if(r<0||n>e.length)throw new RangeError("Out of range index");return r>>>=0,(n=void 0===n?e.length:n>>>0)>r&&e.fill(t,r,n),e}e.exports=function(e,t,i,o,s){if(r)return e.fill(t,i,o,s);if("number"==typeof t)return n(e,t,i,o);if("string"==typeof t){if("string"==typeof i?(s=i,i=0,o=e.length):"string"==typeof o&&(s=o,o=e.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("latin1"===s&&(s="binary"),"string"==typeof s&&!Buffer.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(""===t)return n(e,0,i,o);if(function(e){return 1===e.length&&e.charCodeAt(0)<256}(t))return n(e,t.charCodeAt(0),i,o);t=new Buffer(t,s)}return Buffer.isBuffer(t)?function(e,t,r,n){if(r<0||n>e.length)throw new RangeError("Out of range index");if(n<=r)return e;r>>>=0,n=void 0===n?e.length:n>>>0;for(var i=r,o=t.length;i<=n-o;)t.copy(e,i),i+=o;return i!==n&&t.copy(e,i,0,n-i),e}(e,t,i,o):n(e,0,i,o)}},function(e,t){e.exports=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e)}},function(e,t,r){var n=r(60),i=r(23),o=r(3),s=r(36),a=r(35),u=r(7).Readable,f=r(7).Writable,l=r(62).StringDecoder,c=r(34),d=parseInt("755",8),h=parseInt("644",8),p=s(1024),m=function(){},y=function(e,t){(t&=511)&&e.push(p.slice(0,512-t))};var g=function(e){f.call(this),this.written=0,this._to=e,this._destroyed=!1};o.inherits(g,f),g.prototype._write=function(e,t,r){if(this.written+=e.length,this._to.push(e))return r();this._to._drain=r},g.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var w=function(){f.call(this),this.linkname="",this._decoder=new l("utf-8"),this._destroyed=!1};o.inherits(w,f),w.prototype._write=function(e,t,r){this.linkname+=this._decoder.write(e),r()},w.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var _=function(){f.call(this),this._destroyed=!1};o.inherits(_,f),_.prototype._write=function(e,t,r){r(new Error("No body allowed for this entry"))},_.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var b=function(e){if(!(this instanceof b))return new b(e);u.call(this,e),this._drain=m,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};o.inherits(b,u),b.prototype.entry=function(e,t,r){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(r=t,t=null),r||(r=m);var o=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&n.S_IFMT){case n.S_IFBLK:return"block-device";case n.S_IFCHR:return"character-device";case n.S_IFDIR:return"directory";case n.S_IFIFO:return"fifo";case n.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?d:h),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=a(t)),Buffer.isBuffer(t))return e.size=t.length,this._encode(e),this.push(t),y(o,e.size),process.nextTick(r),new _;if("symlink"===e.type&&!e.linkname){var s=new w;return i(s,function(t){if(t)return o.destroy(),r(t);e.linkname=s.linkname,o._encode(e),r()}),s}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return process.nextTick(r),new _;var u=new g(this);return this._stream=u,i(u,function(t){return o._stream=null,t?(o.destroy(),r(t)):u.written!==e.size?(o.destroy(),r(new Error("size mismatch"))):(y(o,e.size),o._finalizing&&o.finalize(),void r())}),u}},b.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},b.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},b.prototype._encode=function(e){if(!e.pax){var t=c.encode(e);if(t)return void this.push(t)}this._encodePax(e)},b.prototype._encodePax=function(e){var t=c.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(c.encode(r)),this.push(t),y(this,t.length),r.size=e.size,r.type=e.type,this.push(c.encode(r))},b.prototype._read=function(e){var t=this._drain;this._drain=m,t()},e.exports=b},function(e,t,r){e.exports=r(1).constants||r(61)},function(e,t){e.exports=require("constants")},function(e,t){e.exports=require("string_decoder")},function(e,t,r){"use strict";const n=r(4),i=r(24),o=r(64),s=r(0),a=r(2);class u extends s.Transform{constructor(e){super(e);const t=a.sourceType(e.source),r=new i.ZipFile,u=r.outputStream;if(u.on("data",e=>this.push(e)),u.on("end",()=>this.ready(!0)),r.on("error",e=>this.emit("error",e)),"file"!==t&&o(e.relativePath,"opts.relativePath is required when compressing a buffer, or a stream"),t&&this.end(),"file"===t)r.addFile(e.source,e.relativePath||n.basename(e.source),e.yazl);else if("buffer"===t)r.addBuffer(e.source,e.relativePath,e.yazl);else if("stream"===t)r.addReadStream(e.source,e.relativePath,e.yazl);else{const t=this._passThrough=new s.PassThrough;this.on("finish",()=>t.end()),r.addReadStream(t,e.relativePath,e.yazl)}r.end(e.yazl)}_transform(e,t,r){this._passThrough&&this._passThrough.write(e,t,r)}_flush(e){this.ready(e)}}r(13).mixin(u.prototype),e.exports=u},function(e,t){e.exports=require("assert")},function(e,t,r){"use strict";const n=r(66),i=r(0),o=r(69),s=r(2),a=Symbol("ZipUncompressStream#yauzlCallback"),u=Symbol("ZipUncompressStream#stripName"),f={lazyEntries:!0,decodeStrings:!1};e.exports=class extends o{constructor(e){super(e=e||{}),this._chunks=[],this._strip=Number(e.strip)||0,this[a]=this[a].bind(this);const t=s.sourceType(e.source),r=this._yauzlOpts=Object.assign({},f,e.yauzl);"file"!==t?"buffer"!==t?"stream"!==t?this.on("pipe",e=>{e.unpipe(e),s.streamToBuffer(e).then(e=>{this._chunks.push(e),e=Buffer.concat(this._chunks),n.fromBuffer(e,r,this[a])}).catch(e=>this.emit("error",e))}):s.streamToBuffer(e.source).then(e=>n.fromBuffer(e,r,this[a])).catch(e=>this.emit("error",e)):n.fromBuffer(e.source,r,this[a]):n.open(e.source,r,this[a])}_write(e){this._chunks.push(e)}[a](e,t){if(e)return this.emit("error",e);function r(){t.readEntry()}t.readEntry(),t.on("entry",e=>{const n=/\/$/.test(e.fileName)?"directory":"file",o={name:e.fileName=this[u](e.fileName,n),type:n,yauzl:e};if("file"===n)t.openReadStream(e,(e,t)=>{if(e)return this.emit("error",e);this.emit("entry",o,t,r)});else{const e=new i.Readable({read(){}});this.emit("entry",o,e,r),setImmediate(()=>e.emit("end"))}}).on("end",()=>this.emit("finish")).on("error",e=>this.emit("error",e))}[u](e,t){return s.stripFileName(this._strip,e,t)}}},function(e,t,r){var n=r(1),i=r(11),o=r(67),s=r(25),a=r(3),u=r(6).EventEmitter,f=r(0).Transform,l=r(0).PassThrough,c=r(0).Writable;function d(e,t,r){"function"==typeof t&&(r=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!1),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==r&&(r=k),n.fstat(e,function(n,i){if(n)return r(n);h(o.createFromFd(e,{autoClose:!0}),i.size,t,r)})}function h(e,t,r,n){"function"==typeof r&&(n=r,r=null),null==r&&(r={}),null==r.autoClose&&(r.autoClose=!0),null==r.lazyEntries&&(r.lazyEntries=!1),null==r.decodeStrings&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(null==r.validateEntrySizes&&(r.validateEntrySizes=!0),null==r.strictFileNames&&(r.strictFileNames=!1),null==n&&(n=k),"number"!=typeof t)throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=Math.min(65557,t),s=x(o),a=t-s.length;b(e,s,0,o,a,function(u){if(u)return n(u);for(var f=o-22;f>=0;f-=1)if(101010256===s.readUInt32LE(f)){var l=s.slice(f),c=l.readUInt16LE(4);if(0!==c)return n(new Error("multi-disk zip files are not supported: found disk number: "+c));var d=l.readUInt16LE(10),h=l.readUInt32LE(16),m=l.readUInt16LE(20),y=l.length-22;if(m!==y)return n(new Error("invalid comment length. expected: "+y+". found: "+m));var g=i?C(l,22,l.length,!1):l.slice(22);if(65535!==d&&4294967295!==h)return n(null,new p(e,h,t,d,g,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames));var w=x(20),_=a+f-w.length;return void b(e,w,0,w.length,_,function(o){if(o)return n(o);if(117853008!==w.readUInt32LE(0))return n(new Error("invalid zip64 end of central directory locator signature"));var s=z(w,8),a=x(56);b(e,a,0,a.length,s,function(o){return o?n(o):101075792!==a.readUInt32LE(0)?n(new Error("invalid zip64 end of central directory record signature")):(d=z(a,32),h=z(a,48),n(null,new p(e,h,t,d,g,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames)))})})}n(new Error("end of central directory record signature not found"))})}function p(e,t,r,n,i,o,s,a,f,l){var c=this;u.call(c),c.reader=e,c.reader.on("error",function(e){y(c,e)}),c.reader.once("close",function(){c.emit("close")}),c.readEntryCursor=t,c.fileSize=r,c.entryCount=n,c.comment=i,c.entriesRead=0,c.autoClose=!!o,c.lazyEntries=!!s,c.decodeStrings=!!a,c.validateEntrySizes=!!f,c.strictFileNames=!!l,c.isOpen=!0,c.emittedError=!1,c.lazyEntries||c._readEntry()}function m(e,t){e.autoClose&&e.close(),y(e,t)}function y(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function g(){}function w(e,t){return new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0)}function _(e){return-1!==e.indexOf("\\")?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:-1!==e.split("/").indexOf("..")?"invalid relative path: "+e:null}function b(e,t,r,n,i,o){if(0===n)return setImmediate(function(){o(null,x(0))});e.read(t,r,n,i,function(e,t){return e?o(e):t<n?o(new Error("unexpected EOF")):void o()})}function v(e){f.call(this),this.actualByteCount=0,this.expectedByteCount=e}function E(){u.call(this),this.refCount=0}function S(e){l.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}t.open=function(e,t,r){"function"==typeof t&&(r=t,t=null);null==t&&(t={});null==t.autoClose&&(t.autoClose=!0);null==t.lazyEntries&&(t.lazyEntries=!1);null==t.decodeStrings&&(t.decodeStrings=!0);null==t.validateEntrySizes&&(t.validateEntrySizes=!0);null==t.strictFileNames&&(t.strictFileNames=!1);null==r&&(r=k);n.open(e,"r",function(e,i){if(e)return r(e);d(i,t,function(e,t){e&&n.close(i,k),r(e,t)})})},t.fromFd=d,t.fromBuffer=function(e,t,r){"function"==typeof t&&(r=t,t=null);null==t&&(t={});t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1);null==t.decodeStrings&&(t.decodeStrings=!0);null==t.validateEntrySizes&&(t.validateEntrySizes=!0);null==t.strictFileNames&&(t.strictFileNames=!1);h(o.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,r)},t.fromRandomAccessReader=h,t.dosDateTimeToDate=w,t.validateFileName=_,t.ZipFile=p,t.Entry=g,t.RandomAccessReader=E,a.inherits(p,u),p.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},p.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},p.prototype._readEntry=function(){var e=this;if(e.entryCount!==e.entriesRead){if(!e.emittedError){var t=x(46);b(e.reader,t,0,t.length,e.readEntryCursor,function(r){if(r)return m(e,r);if(!e.emittedError){var n=new g,i=t.readUInt32LE(0);if(33639248!==i)return m(e,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=t.readUInt16LE(4),n.versionNeededToExtract=t.readUInt16LE(6),n.generalPurposeBitFlag=t.readUInt16LE(8),n.compressionMethod=t.readUInt16LE(10),n.lastModFileTime=t.readUInt16LE(12),n.lastModFileDate=t.readUInt16LE(14),n.crc32=t.readUInt32LE(16),n.compressedSize=t.readUInt32LE(20),n.uncompressedSize=t.readUInt32LE(24),n.fileNameLength=t.readUInt16LE(28),n.extraFieldLength=t.readUInt16LE(30),n.fileCommentLength=t.readUInt16LE(32),n.internalFileAttributes=t.readUInt16LE(36),n.externalFileAttributes=t.readUInt32LE(38),n.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&n.generalPurposeBitFlag)return m(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=x(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),b(e.reader,t,0,t.length,e.readEntryCursor,function(r){if(r)return m(e,r);if(!e.emittedError){var i=0!=(2048&n.generalPurposeBitFlag);n.fileName=e.decodeStrings?C(t,0,n.fileNameLength,i):t.slice(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength,a=t.slice(n.fileNameLength,o);n.extraFields=[];for(var u=0;u<a.length-3;){var f=a.readUInt16LE(u+0),l=a.readUInt16LE(u+2),c=u+4,d=c+l;if(d>a.length)return m(e,new Error("extra field length exceeds extra field buffer size"));var h=x(l);a.copy(h,0,c,d),n.extraFields.push({id:f,data:h}),u=d}if(n.fileComment=e.decodeStrings?C(t,o,o+n.fileCommentLength,i):t.slice(o,o+n.fileCommentLength),n.comment=n.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,4294967295===n.uncompressedSize||4294967295===n.compressedSize||4294967295===n.relativeOffsetOfLocalHeader){var p=null;for(u=0;u<n.extraFields.length;u++){if(1===(g=n.extraFields[u]).id){p=g.data;break}}if(null==p)return m(e,new Error("expected zip64 extended information extra field"));var y=0;if(4294967295===n.uncompressedSize){if(y+8>p.length)return m(e,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=z(p,y),y+=8}if(4294967295===n.compressedSize){if(y+8>p.length)return m(e,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=z(p,y),y+=8}if(4294967295===n.relativeOffsetOfLocalHeader){if(y+8>p.length)return m(e,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=z(p,y),y+=8}}if(e.decodeStrings)for(u=0;u<n.extraFields.length;u++){var g;if(28789===(g=n.extraFields[u]).id){if(g.data.length<6)continue;if(1!==g.data.readUInt8(0))continue;var w=g.data.readUInt32LE(1);if(s.unsigned(t.slice(0,n.fileNameLength))!==w)continue;n.fileName=C(g.data,5,g.data.length,!0);break}}if(e.validateEntrySizes&&0===n.compressionMethod){var b=n.uncompressedSize;if(n.isEncrypted()&&(b+=12),n.compressedSize!==b){var v="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return m(e,new Error(v))}}if(e.decodeStrings){e.strictFileNames||(n.fileName=n.fileName.replace(/\\/g,"/"));var E=_(n.fileName,e.validateFileNameOptions);if(null!=E)return m(e,new Error(E))}e.emit("entry",n),e.lazyEntries||e._readEntry()}})}})}}else setImmediate(function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")})},p.prototype.openReadStream=function(e,t,r){var n=this,o=0,s=e.compressedSize;if(null==r)r=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw new Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((o=t.start)<0)throw new Error("options.start < 0");if(o>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=t.end){if((s=t.end)<0)throw new Error("options.end < 0");if(s>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<o)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return r(new Error("entry is encrypted, and options.decrypt !== false"));n.reader.ref();var a=x(30);b(n.reader,a,0,a.length,e.relativeOffsetOfLocalHeader,function(u){try{if(u)return r(u);var f=a.readUInt32LE(0);if(67324752!==f)return r(new Error("invalid local file header signature: 0x"+f.toString(16)));var l,c=a.readUInt16LE(26),d=a.readUInt16LE(28),h=e.relativeOffsetOfLocalHeader+a.length+c+d;if(0===e.compressionMethod)l=!1;else{if(8!==e.compressionMethod)return r(new Error("unsupported compression method: "+e.compressionMethod));l=null==t.decompress||t.decompress}var p=h,m=p+e.compressedSize;if(0!==e.compressedSize&&m>n.fileSize)return r(new Error("file data overflows file bounds: "+p+" + "+e.compressedSize+" > "+n.fileSize));var y=n.reader.createReadStream({start:p+o,end:p+s}),g=y;if(l){var w=!1,_=i.createInflateRaw();y.on("error",function(e){setImmediate(function(){w||_.emit("error",e)})}),y.pipe(_),n.validateEntrySizes?(g=new v(e.uncompressedSize),_.on("error",function(e){setImmediate(function(){w||g.emit("error",e)})}),_.pipe(g)):g=_,g.destroy=function(){w=!0,_!==g&&_.unpipe(g),y.unpipe(_),y.destroy()}}r(null,g)}finally{n.reader.unref()}})},g.prototype.getLastModDate=function(){return w(this.lastModFileDate,this.lastModFileTime)},g.prototype.isEncrypted=function(){return 0!=(1&this.generalPurposeBitFlag)},g.prototype.isCompressed=function(){return 8===this.compressionMethod},a.inherits(v,f),v.prototype._transform=function(e,t,r){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,e)},v.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()},a.inherits(E,u),E.prototype.ref=function(){this.refCount+=1},E.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.close(function(t){if(t)return e.emit("error",t);e.emit("close")})}},E.prototype.createReadStream=function(e){var t=e.start,r=e.end;if(t===r){var n=new l;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(t,r),o=!1,s=new S(this);i.on("error",function(e){setImmediate(function(){o||s.emit("error",e)})}),s.destroy=function(){i.unpipe(s),s.unref(),i.destroy()};var a=new v(r-t);return s.on("error",function(e){setImmediate(function(){o||a.emit("error",e)})}),a.destroy=function(){o=!0,s.unpipe(a),s.destroy()},i.pipe(s).pipe(a)},E.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")},E.prototype.read=function(e,t,r,n,i){var o=this.createReadStream({start:n,end:n+r}),s=new c,a=0;s._write=function(r,n,i){r.copy(e,t+a,0,r.length),a+=r.length,i()},s.on("finish",i),o.on("error",function(e){i(e)}),o.pipe(s)},E.prototype.close=function(e){setImmediate(e)},a.inherits(S,l),S.prototype._flush=function(e){this.unref(),e()},S.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var x,L="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function C(e,t,r,n){if(n)return e.toString("utf8",t,r);for(var i="",o=t;o<r;o++)i+=L[e[o]];return i}function z(e,t){var r=e.readUInt32LE(t);return 4294967296*e.readUInt32LE(t+4)+r}function k(e){if(e)throw e}x="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)}},function(e,t,r){var n=r(1),i=r(3),o=r(0),s=o.Readable,a=o.Writable,u=o.PassThrough,f=r(68),l=r(6).EventEmitter;function c(e,t){t=t||{},l.call(this),this.fd=e,this.pend=new f,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function d(e,t){t=t||{},s.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function h(e,t){t=t||{},a.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function p(e,t){l.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}t.createFromBuffer=function(e,t){return new p(e,t)},t.createFromFd=function(e,t){return new c(e,t)},t.BufferSlicer=p,t.FdSlicer=c,i.inherits(c,l),c.prototype.read=function(e,t,r,i,o){var s=this;s.pend.go(function(a){n.read(s.fd,e,t,r,i,function(e,t,r){a(),o(e,t,r)})})},c.prototype.write=function(e,t,r,i,o){var s=this;s.pend.go(function(a){n.write(s.fd,e,t,r,i,function(e,t,r){a(),o(e,t,r)})})},c.prototype.createReadStream=function(e){return new d(this,e)},c.prototype.createWriteStream=function(e){return new h(this,e)},c.prototype.ref=function(){this.refCount+=1},c.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&n.close(e.fd,function(t){t?e.emit("error",t):e.emit("close")})}},i.inherits(d,s),d.prototype._read=function(e){var t=this;if(!t.destroyed){var r=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(r=Math.min(r,t.endOffset-t.pos)),r<=0)return t.destroyed=!0,t.push(null),void t.context.unref();t.context.pend.go(function(e){if(t.destroyed)return e();var i=new Buffer(r);n.read(t.context.fd,i,0,r,t.pos,function(r,n){r?t.destroy(r):0===n?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=n,t.push(i.slice(0,n))),e()})})}},d.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},i.inherits(h,a),h.prototype._write=function(e,t,r){var i=this;if(!i.destroyed){if(i.pos+e.length>i.endOffset){var o=new Error("maximum file length exceeded");return o.code="ETOOBIG",i.destroy(),void r(o)}i.context.pend.go(function(t){if(i.destroyed)return t();n.write(i.context.fd,e,0,e.length,i.pos,function(e,n){e?(i.destroy(),t(),r(e)):(i.bytesWritten+=n,i.pos+=n,i.emit("progress"),t(),r())})})}},h.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},i.inherits(p,l),p.prototype.read=function(e,t,r,n,i){var o=n+r,s=o-this.buffer.length,a=s>0?s:r;this.buffer.copy(e,t,n,o),setImmediate(function(){i(null,a)})},p.prototype.write=function(e,t,r,n,i){e.copy(this.buffer,n,t,t+r),setImmediate(function(){i(null,r,e)})},p.prototype.createReadStream=function(e){var t=new u(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var r=this.buffer.slice(t.start,t.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&t.write(r.slice(n,r.length));break}t.write(r.slice(n,i)),n=i}return t.end(),t.destroy=function(){t.destroyed=!0},t},p.prototype.createWriteStream=function(e){var t=this,r=new a(e=e||{});return r.start=e.start||0,r.endOffset=null==e.end?this.buffer.length:+e.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(e,n,i){if(!r.destroyed){var o=r.pos+e.length;if(o>r.endOffset){var s=new Error("maximum file length exceeded");return s.code="ETOOBIG",r.destroyed=!0,void i(s)}e.copy(t.buffer,r.pos,0,e.length),r.bytesWritten+=e.length,r.pos=o,r.emit("progress"),i()}},r.destroy=function(){r.destroyed=!0},r},p.prototype.ref=function(){this.refCount+=1},p.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")}},function(e,t){function r(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function n(e){e.pending+=1;var t=!1;return function(n){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||n,e.pending-=1,e.waiting.length>0&&e.pending<e.max)i(e,e.waiting.shift());else if(0===e.pending){var o=e.listeners;e.listeners=[],o.forEach(r)}};function r(t){t(e.error)}}function i(e,t){t(n(e))}e.exports=r,r.prototype.go=function(e){this.pending<this.max?i(this,e):this.waiting.push(e)},r.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},r.prototype.hold=function(){return n(this)}},function(e,t,r){"use strict";const n=r(0);e.exports=class extends n.Writable{emit(e,t){if("error"===e){const e=t;"Error"===e.name&&(e.name=this.constructor.name+"Error")}super.emit.apply(this,arguments)}}},function(e,t,r){"use strict";const n=r(1),i=r(11),o=r(2),s=r(15);e.exports=class extends i.Gzip{constructor(e){super((e=e||{}).zlib);const t=o.sourceType(e.source);if("file"===t){const t=n.createReadStream(e.source,e.fs);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}if("buffer"===t){const t=s.createReadStream(e.source,e.streamifier);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}"stream"===t&&(e.source.on("error",e=>this.emit("error",e)),e.source.pipe(this))}}},function(e,t,r){"use strict";const n=r(1),i=r(11),o=r(2),s=r(15);e.exports=class extends i.Unzip{constructor(e){super((e=e||{}).zlib);const t=o.sourceType(e.source);if("file"===t){const t=n.createReadStream(e.source,e.fs);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}if("buffer"===t){const t=s.createReadStream(e.source,e.streamifier);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}"stream"===t&&(e.source.on("error",e=>this.emit("error",e)),e.source.pipe(this))}}},function(e,t,r){"use strict";const n=r(1),i=r(4),o=r(0),s=r(17),a=r(2);class u extends o.Transform{constructor(e){super(e);const t=s.pack();t.on("data",e=>this.push(e)),t.on("end",()=>this.ready(!0));const r=a.sourceType(e.source);if("file"===r)n.stat(e.source,(r,o)=>{if(r)return this.emit("error",r);this.entry=t.entry({name:e.relativePath||i.basename(e.source),size:o.size,mode:511&o.mode},e=>{if(e)return this.emit("error",e);t.finalize()});const s=n.createReadStream(e.source,e.fs);s.on("error",e=>this.emit("error",e)),s.pipe(this)});else if("buffer"===r){if(!e.relativePath)return this.emit("error","opts.relativePath is required if opts.source is a buffer");t.entry({name:e.relativePath},e.source),t.finalize(),this.end()}else{if(!e.relativePath)return process.nextTick(()=>this.emit("error","opts.relativePath is required"));if(e.size)this.entry=t.entry({name:e.relativePath,size:e.size},e=>{if(e)return this.emit("error",e);t.finalize()});else{e.suppressSizeWarning||console.warn("You should specify the size of streamming data by opts.size to prevent all streaming data from loading into memory. If you are sure about memory cost, pass opts.supressSizeWarning: true to suppress this warning");const r=[];this.entry=new o.Writable({write(e,t,n){r.push(e),n()}}),this.entry.on("finish",()=>{t.entry({name:e.relativePath},Buffer.concat(r)),t.finalize()})}"stream"===r&&(e.source.on("error",e=>this.emit("error",e)),e.source.pipe(this))}}_transform(e,t,r){this.entry&&this.entry.write(e,t,r)}_flush(e){this.entry&&this.entry.end(),this.ready(e)}}r(13).mixin(u.prototype),e.exports=u},function(e,t,r){"use strict";const n=r(1),i=r(17),o=r(2),s=r(15);e.exports=class extends i.extract{constructor(e){super(e=e||{});const t=o.sourceType(e.source);if("file"===t){const t=n.createReadStream(e.source,e.fs);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}if("buffer"===t){const t=s.createReadStream(e.source,e.streamifier);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}"stream"===t&&(e.source.on("error",e=>this.emit("error",e)),e.source.pipe(this))}}},function(e,t,r){"use strict";const n=r(2),i=r(75),o=r(76),s=r(77);t.Stream=i,t.FileStream=o,t.UncompressStream=s,t.compressDir=n.makeCompressDirFn(i),t.compressFile=n.makeFileProcessFn(o),t.uncompress=n.makeUncompressFn(s)},function(e,t,r){"use strict";const n=r(16),i=r(14),o=r(37);e.exports=class extends o{constructor(e){super(e);const t=this._tarStream=new n.Stream;t.on("error",e=>this.emit("error",e));const r=new i.FileStream;r.on("end",()=>this.push(null)),r.on("data",e=>this.push(e)),r.on("error",e=>this.emit("error",e)),t.pipe(r)}addEntry(e,t){this._tarStream.addEntry(e,t)}}},function(e,t,r){"use strict";const n=r(16),i=r(14),o=r(2),s=r(0),a=r(21);class u extends s.Transform{constructor(e){super(e=e||{});const t=this._sourceType=o.sourceType(e.source),r=this._tarStream=new n.FileStream(e);delete(e=o.clone(e)).source;const s=new i.FileStream(e);s.on("data",e=>{this.push(e)}),s.on("end",()=>this.ready(!0)),a(r,s,e=>{e&&this.emit("error",e)}),"stream"!==t&&void 0!==t&&this.end()}_transform(e,t,r){this._tarStream.write(e,t,r)}_flush(e){"stream"!==this._sourceType&&void 0!==this._sourceType||this._tarStream.end(),this.ready(e)}}r(13).mixin(u.prototype),e.exports=u},function(e,t,r){"use strict";const n=r(1),i=r(2),o=r(13),s=r(15),a=r(78),u=r(14).UncompressStream,f=r(16).UncompressStream;class l extends a{constructor(e){super(e=e||{});const t=i.clone(e);t.source=void 0,this._gzipStream=new u(t).on("error",e=>this.emit("error",e));const r=new f(t).on("finish",()=>this.ready(!0)).on("entry",this.emit.bind(this,"entry")).on("error",e=>this.emit("error",e));this._gzipStream.pipe(r);const o=i.sourceType(e.source);if("file"===o){const t=n.createReadStream(e.source,e.fs);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}if("buffer"===o){const t=s.createReadStream(e.source,e.streamifier);return t.on("error",e=>this.emit("error",e)),void t.pipe(this)}"stream"===o&&(e.source.on("error",e=>this.emit("error",e)),e.source.pipe(this))}_write(e,t,r){this._gzipStream.write(e,t,r)}_flush(e){this._gzipStream.end(),this.ready(e)}}o.mixin(l.prototype),e.exports=l},function(e,t,r){var n=r(6).EventEmitter,i=r(0).Writable;function o(e){i.call(this,e)}r(3).inherits(o,i),o.prototype.emit=function(e){if("finish"===e&&this._flush&&!i.prototype._flush)this._flush(function(e){e?n.prototype.emit.call(this,"error",e):n.prototype.emit.call(this,"finish")}.bind(this));else{var t=Array.prototype.slice.call(arguments);n.prototype.emit.apply(this,t)}},e.exports=o}]));